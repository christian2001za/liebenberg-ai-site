---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

export async function getStaticPaths() {
  const posts = await getCollection("blog");
  return posts
    .filter((post) => !post.data.draft)
    .map((post) => ({
      params: { slug: post.slug },
      props: { post },
    }));
}

const { post } = Astro.props;
const { Content } = await post.render();
const canonical = `https://www.liebenberg.ai/blog/${post.slug}/`;
---

<BaseLayout
  title={`${post.data.title} | Liebenberg AI`}
  description={post.data.description}
  canonical={canonical}
  image={post.data.heroImage ?? ""}
  type="article"
>
  <main class="px-6 py-24 md:py-32">
    <article class="mx-auto max-w-3xl">
      <a
        href="/blog/"
        class="inline-flex items-center justify-center gap-2 text-sm font-medium text-muted-foreground transition-colors hover:text-foreground"
      >
        Terug naar overzicht
      </a>
      <p class="text-xs uppercase tracking-[0.2em] text-muted-foreground">
        {post.data.pubDate.toLocaleDateString("nl-NL", {
          year: "numeric",
          month: "long",
          day: "numeric",
        })}
      </p>
      <h1 class="mt-3 text-4xl md:text-5xl font-heading">{post.data.title}</h1>
      <p class="mt-4 text-muted-foreground text-lg">{post.data.description}</p>
      {post.data.heroImage && (
        <img
          src={post.data.heroImage}
          alt={post.data.title}
          class="mt-8 rounded-2xl border border-white/10"
        />
      )}
      <div class="prose prose-invert mt-10 max-w-none">
        <Content />
      </div>
    </article>
  </main>
</BaseLayout>
