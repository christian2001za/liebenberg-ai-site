---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

const posts = (await getCollection("blog"))
  .filter((post) => !post.data.draft)
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---

<BaseLayout
  title="Blog | Liebenberg AI"
  description="Praktische inzichten over AI, automatisering en slimme software voor consultancy en MKB."
  canonical="https://www.liebenberg.ai/blog/"
>
  <main class="px-6 py-24 md:py-32">
    <div class="mx-auto max-w-3xl">
      <div class="mb-12">
        <p class="text-xs uppercase tracking-[0.2em] text-muted-foreground">Blog</p>
        <h1 class="mt-3 text-4xl md:text-5xl font-heading">Inzichten en praktijkvoorbeelden</h1>
        <p class="mt-4 text-muted-foreground">
          Artikelen over AIâ€‘toepassingen, procesoptimalisatie en hoe je dit slim inzet in consultancy.
        </p>
      </div>

      {posts.length === 0 ? (
        <div class="rounded-2xl border border-white/10 bg-secondary/5 p-6 text-muted-foreground">
          Nog geen artikelen gepubliceerd.
        </div>
      ) : (
        <div class="space-y-6">
          {posts.map((post) => (
            <a
              href={`/blog/${post.slug}/`}
              class="flex items-start gap-4 rounded-2xl border border-white/10 bg-secondary/5 p-6 transition-colors hover:border-white/20 hover:bg-secondary/10"
            >
              {post.data.heroImage ? (
                <img
                  src={post.data.heroImage}
                  alt={post.data.title}
                  class="h-16 w-16 shrink-0 rounded-xl border border-white/10 object-cover"
                  loading="lazy"
                />
              ) : (
                <div class="h-16 w-16 shrink-0 rounded-xl border border-white/10 bg-white/5" />
              )}
              <div class="min-w-0">
                <p class="text-xs uppercase tracking-[0.2em] text-muted-foreground">
                  {post.data.pubDate.toLocaleDateString("nl-NL", {
                    year: "numeric",
                    month: "long",
                    day: "numeric",
                  })}
                </p>
                <h2 class="mt-3 text-2xl font-heading">{post.data.title}</h2>
                <p class="mt-3 text-muted-foreground">{post.data.description}</p>
              </div>
            </a>
          ))}
        </div>
      )}
    </div>
  </main>
</BaseLayout>
